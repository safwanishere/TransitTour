<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nearby Places</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/styles.css') }}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    
</head>
<body>
    <div class="container">
        <h2>Nearby Places You Can Visit</h2>

        <div id="map"></div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        var map = L.map('map').setView([{{ lat }}, {{ lon }}], 13);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
        }).addTo(map);

        {% for place in places %}
            L.marker([{{ place.point.lat }}, {{ place.point.lon }}]).addTo(map)
                .bindPopup(`<h3>{{ place.name | default('Unknown') }}</h3>
                            <p>Type: {{ place.kinds.replace('_', ' ') }}</p>`);
        {% endfor %}
    </script>
</body>
</html>
